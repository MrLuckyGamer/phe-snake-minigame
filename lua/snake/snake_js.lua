--[[
	"JavaScript" Snake
	By Patrick Gillespie
	http://patorjk.com/games/snake
	Source code is available here: https://github.com/patorjk/JavaScript-Snake
	
	LICENSE
	Copyright Â© Patrick Gillespie, http://patorjk.com
	
	Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
	
	The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
	
	'AwesomeSnake JS' for Garry's Mod
	Modified by: Wolvindra-Vinzuerio
	https://www.wolvindra.net
]]
snake.DataHTML = [[<!DOCTYPE html> 
<head>
   <meta charset="utf-8">
   <title>GSnake</title>
   <style type='text/css'>
   body{margin:0;padding:0;overflow:hidden}#game-area{margin:0;padding:0}#high-score{position:relative;left:200px;bottom:50px}#mode-wrapper{color:#fff;font-family:Verdana,arial,helvetica,sans-serif;font-size:12px}#game-area:focus{outline:0}a.snake-link,a.snake-link:link,a.snake-link:visited{color:#fcfc54}a.snake-link:hover{color:#ffff54}.snake-pause-screen{font-family:Verdana,arial,helvetica,sans-serif;font-size:14px;position:absolute;width:300px;height:80px;text-align:center;top:50%;left:50%;margin-top:-40px;margin-left:-150px;display:none;background-color:#000;color:#fff}.snake-panel-component{position:absolute;font-family:Verdana,arial,helvetica,sans-serif;font-size:14px;color:#fff;text-align:center;padding:8px;margin:0}.snake-snakebody-block{margin:0;padding:0;background-color:red;position:absolute;border:0 solid navy;background-repeat:no-repeat}.snake-snakebody-alive{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAABGdBTUEAALGPC/xhBQAAAC5JREFUOE9jZGBYwUABWPHnTwgZCGLrqGaiA280wIgOKkhyHA2woRZg4BgjBwEAYYUNxwyvHTQAAAAASUVORK5CYII=)}.snake-snakebody-dead{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6AAAdTAAAOpgAAA6lwAAF2+XqZnUAAAAe0lEQVR4nGJkYFjBQC4ACCAWID5wQIIMnQ4OLwACiIlsa4EAIIAo0gwQQBRpBgggijQDBBBFmgECiCLNAAFEkWaAAKJIM0AAUaQZIIAo0gwQQBRpBgggijQDBBBFmgECiCLNAAFEkWaAAKJIM0AAUaQZIIAYKSmGAAIMAOydBHklgXKUAAAAAElFTkSuQmCC)}.snake-food-block{margin:0;padding:0;background-color:red;border:0 solid navy;position:absolute}.snake-playing-field{margin:0;padding:0;position:absolute;background-color:#303030;border:0 solid #303030}.snake-game-container{margin:0;padding:0;border-width:0;border-style:none;zoom:1;background-color:#646464;position:relative}.snake-welcome-dialog{padding:8px;margin:0;background-color:#000;color:#fff;font-family:Verdana,arial,helvetica,sans-serif;font-size:14px;position:absolute;top:50%;left:50%;width:300px;margin-top:-100px;margin-left:-158px;text-align:center;display:block;opacity:.75}.snake-try-again-dialog{padding:8px;margin:0;background-color:#000;color:#fff;font-family:Verdana,arial,helvetica,sans-serif;font-size:14px;position:absolute;top:50%;left:50%;width:300px;height:100px;margin-top:-75px;margin-left:-158px;text-align:center;display:none;opacity:.75}
   </style>
</head>
<body>
   <div id="game-area" tabindex="0"></div>
   <script type="text/javascript">
   var SNAKE=SNAKE||{};SNAKE.addEventListener=window.addEventListener?function(e,t,n,a){e.addEventListener(t,n,a)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,SNAKE.removeEventListener=window.removeEventListener?function(e,t,n,a){e.removeEventListener(t,n,a)}:window.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,SNAKE.Snake=SNAKE.Snake||function(){var e=[],t=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};return function(n){if(n&&n.playingBoard){var a=this,o=n.playingBoard,d=(0,[]),l=1,i=[0,1,0,-1],s=[-1,0,1,0],r=[],c=[],u=!1,k=!1;a.snakeBody={},a.snakeBody.b0=new t,a.snakeBody.b0.row=n.startRow||1,a.snakeBody.b0.col=n.startCol||1,a.snakeBody.b0.xPos=a.snakeBody.b0.row*o.getBlockWidth(),a.snakeBody.b0.yPos=a.snakeBody.b0.col*o.getBlockHeight(),a.snakeBody.b0.elm=m(),a.snakeBody.b0.elmStyle=a.snakeBody.b0.elm.style,o.getBoardContainer().appendChild(a.snakeBody.b0.elm),a.snakeBody.b0.elm.style.left=a.snakeBody.b0.xPos+"px",a.snakeBody.b0.elm.style.top=a.snakeBody.b0.yPos+"px",a.snakeBody.b0.next=a.snakeBody.b0,a.snakeBody.b0.prev=a.snakeBody.b0,a.snakeLength=1,a.snakeHead=a.snakeBody.b0,a.snakeTail=a.snakeBody.b0,a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.className+=" snake-snakebody-alive",a.setPaused=function(e){k=e},a.getPaused=function(){return k},a.handleArrowKeys=function(e){if(!u&&!k){var t=a.snakeLength,n=d[0]||l;switch(e){case 37:case 65:1===n&&1!==t||d.unshift(3);break;case 38:case 87:2===n&&1!==t||d.unshift(0);break;case 39:case 68:3===n&&1!==t||d.unshift(1);break;case 40:case 83:0===n&&1!==t||d.unshift(2)}}},a.go=function(){var e=a.snakeHead,t=a.snakeTail,n=l,u=o.grid;!0!==k?(a.snakeTail=t.prev,a.snakeHead=t,u[t.row]&&u[t.row][t.col]&&(u[t.row][t.col]=0),d.length&&(n=l=d.pop()),t.col=e.col+i[n],t.row=e.row+s[n],t.xPos=e.xPos+r[n],t.yPos=e.yPos+c[n],t.elmStyle||(t.elmStyle=t.elm.style),t.elmStyle.left=t.xPos+"px",t.elmStyle.top=t.yPos+"px",0===u[t.row][t.col]?(u[t.row][t.col]=1,setTimeout(function(){a.go()},75)):u[t.row][t.col]>0?a.handleDeath():u[t.row][t.col]===o.getGridFoodValue()&&(u[t.row][t.col]=1,a.eatFood(),setTimeout(function(){a.go()},75))):setTimeout(function(){a.go()},75)},a.eatFood=function(){e.length<=2&&p(4);for(var t,n=e.splice(0,2),d=n.length,l=a.snakeTail;d--;)t="b"+a.snakeLength++,a.snakeBody[t]=n[d],a.snakeBody[t].prev=l,a.snakeBody[t].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeBody[t].elm.className+=" snake-snakebody-alive",l.next=a.snakeBody[t],l=a.snakeBody[t];a.snakeTail=a.snakeBody[t],a.snakeTail.next=a.snakeHead,a.snakeHead.prev=a.snakeTail,o.foodEaten()},a.handleDeath=function(){console.doPost(a.snakeLength),a.snakeHead.elm.style.zIndex=function(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}(a.snakeBody),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),a.snakeHead.elm.className+=" snake-snakebody-dead",u=!0,o.handleDeath(),d.length=0},a.rebirth=function(){u=!1},a.reset=function(){if(!1!==u){for(var t,d=[],l=a.snakeHead.next;l!==a.snakeHead;)t=l.next,l.prev=null,l.next=null,d.push(l),l=t;a.snakeHead.next=a.snakeHead,a.snakeHead.prev=a.snakeHead,a.snakeTail=a.snakeHead,a.snakeLength=1;for(var i=0;i<d.length;i++)d[i].elm.style.left="-1000px",d[i].elm.style.top="-1000px",d[i].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),d[i].elm.className+=" snake-snakebody-alive";e.concat(d),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.className+=" snake-snakebody-alive",a.snakeHead.row=n.startRow||1,a.snakeHead.col=n.startCol||1,a.snakeHead.xPos=a.snakeHead.row*o.getBlockWidth(),a.snakeHead.yPos=a.snakeHead.col*o.getBlockHeight(),a.snakeHead.elm.style.left=a.snakeHead.xPos+"px",a.snakeHead.elm.style.top=a.snakeHead.yPos+"px"}},p(4),r[0]=0,r[1]=o.getBlockWidth(),r[2]=0,r[3]=-1*o.getBlockWidth(),c[0]=-1*o.getBlockHeight(),c[1]=0,c[2]=o.getBlockHeight(),c[3]=0}function m(){var e=document.createElement("div");return e.className="snake-snakebody-block",e.style.left="-1000px",e.style.top="-1000px",e.style.width=o.getBlockWidth()+"px",e.style.height=o.getBlockHeight()+"px",e}function p(n){for(var a,d=m(),l=1;l<n;l++)(a=new t).elm=d.cloneNode(!0),a.elmStyle=a.elm.style,o.getBoardContainer().appendChild(a.elm),e[e.length]=a;(a=new t).elm=d,o.getBoardContainer().appendChild(a.elm),e[e.length]=a}}}(),SNAKE.Food=SNAKE.Food||function(){var e=0;function t(e,t){return Math.floor(Math.random()*(t+1-e))+e}return function(n){if(n&&n.playingBoard){var a,o,d=n.playingBoard,l=e++,i=document.createElement("div");i.setAttribute("id","snake-food-"+l),i.className="snake-food-block",i.style.width=d.getBlockWidth()+"px",i.style.height=d.getBlockHeight()+"px",i.style.left="-1000px",i.style.top="-1000px",d.getBoardContainer().appendChild(i),this.getFoodElement=function(){return i},this.randomlyPlaceFood=function(){d.grid[a]&&d.grid[a][o]===d.getGridFoodValue()&&(d.grid[a][o]=0);for(var e=0,n=0,l=0,s=d.grid.length-1,r=d.grid[0].length-1;0!==d.grid[e][n];)if(e=t(1,s),n=t(1,r),++l>2e4){e=-1,n=-1;break}d.grid[e][n]=d.getGridFoodValue(),a=e,o=n,i.style.top=e*d.getBlockHeight()+"px",i.style.left=n*d.getBlockWidth()+"px"}}}}(),SNAKE.Board=SNAKE.Board||function(){var e=0;function t(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}return function(n){var a,o,d,l,i,s,r,c,u,k,m=this,p=e++,h=n||{},y=250,g=250,f=1,v=!1;function B(){(i=document.createElement("div")).setAttribute("id","playingField"),i.className="snake-playing-field",SNAKE.addEventListener(i,"click",function(){l.focus()},!1),(k=document.createElement("div")).className="snake-pause-screen",k.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>",(s=document.createElement("div")).className="snake-panel-component",s.innerHTML="&#9888; HINT: Use WASD/Arrow Keys to move.",(r=document.createElement("div")).className="snake-panel-component",r.innerHTML="Length: 1",c=function(){var e=document.createElement("div");e.id="sbWelcome"+p,e.className="snake-welcome-dialog";var t=document.createElement("div");h.fullScreen&&"";t.innerHTML="GSnake<p></p>Welcome to GSnake! Please note that this minigame is currently on beta version. Click 'START GAME' to begin!<p></p>";var n=document.createElement("button");n.appendChild(document.createTextNode("START GAME"));var a=function(){SNAKE.removeEventListener(window,"keyup",o,!1),e.style.display="none",m.setBoardState(1),m.getBoardContainer().focus()},o=function(e){if(!e)var e=window.event;var t=e.which?e.which:e.keyCode;32!==t&&13!==t||a()};return SNAKE.addEventListener(window,"keyup",o,!1),SNAKE.addEventListener(n,"click",a,!1),e.appendChild(t),e.appendChild(n),e}(),u=function(){var e=document.createElement("div");e.id="sbTryAgain"+p,e.className="snake-try-again-dialog";var t=document.createElement("div");t.innerHTML="GSnake<p></p>Oh no, you died &#128546;<p></p>";var n=document.createElement("button");n.appendChild(document.createTextNode("Restart"));var a=function(){e.style.display="none",m.resetBoard(),m.setBoardState(1),m.getBoardContainer().focus()};return SNAKE.addEventListener(window,"keyup",function(t){if(0===f&&"block"===e.style.display){if(!t)var t=window.event;var n=t.which?t.which:t.keyCode;32!==n&&13!==n||a()}},!0),SNAKE.addEventListener(n,"click",a,!1),e.appendChild(t),e.appendChild(n),e}(),SNAKE.addEventListener(l,"keyup",function(e){if(!e)e=window.event;return e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},!1),l.className="snake-game-container",k.style.zIndex=1e4,l.appendChild(k),l.appendChild(i),l.appendChild(s),l.appendChild(r),l.appendChild(c),l.appendChild(u),o=new SNAKE.Snake({playingBoard:m,startRow:2,startCol:2}),a=new SNAKE.Food({playingBoard:m}),c.style.zIndex=1e3}m.grid=[],m.setPaused=function(e){v=e,o.setPaused(e),k.style.display=v?"block":"none"},m.getPaused=function(){return v},m.resetBoard=function(){SNAKE.removeEventListener(l,"keydown",d,!1),o.reset(),r.innerHTML="Length: 1",m.setupPlayingField()},m.getBoardState=function(){return f},m.setBoardState=function(e){f=e},m.getGridFoodValue=function(){return-1},m.getPlayingFieldElement=function(){return i},m.setBoardContainer=function(e){"string"==typeof e&&(e=document.getElementById(e)),e!==l&&(l=e,i=null,m.setupPlayingField())},m.getBoardContainer=function(){return l},m.getBlockWidth=function(){return 20},m.getBlockHeight=function(){return 20},m.setupPlayingField=function(){var e,t,n,c;i||B(),!0===h.fullScreen?(cTop=0,cLeft=0,c=0,"number"==typeof window.innerWidth?c=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?c=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(c=document.body.clientWidth),e=c-5,n=0,"number"==typeof window.innerHeight?n=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?n=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(n=document.body.clientHeight),t=n-5,document.body.style.backgroundColor="#646464"):(cTop=h.top,cLeft=h.left,e=h.width,t=h.height);var u=2*m.getBlockWidth()+e%m.getBlockWidth(),k=Math.min(y*m.getBlockWidth()-u,e-u),p=3*m.getBlockHeight()+t%m.getBlockHeight(),f=Math.min(g*m.getBlockHeight()-p,t-p);l.style.left=cLeft+"px",l.style.top=cTop+"px",l.style.width=e+"px",l.style.height=t+"px",i.style.left=m.getBlockWidth()+"px",i.style.top=m.getBlockHeight()+"px",i.style.width=k+"px",i.style.height=f+"px";var v=p-m.getBlockHeight(),w=m.getBlockHeight()+f+Math.round((v-30)/2)+"px";s.style.top=w,s.style.width="450px",s.style.left=Math.round(e/2)-Math.round(225)+"px",r.style.top="25px",r.style.left=e-120+"px",s.style.display=e<700?"none":"block",m.grid=[];for(var b=k/m.getBlockWidth()+2,E=f/m.getBlockHeight()+2,H=0;H<E;H++){m.grid[H]=[];for(var S=0;S<b;S++)m.grid[H][S]=0===S||0===H||S===b-1||H===E-1?1:0}a.randomlyPlaceFood(),d=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;if(1===m.getBoardState()){if(!(t>=37&&t<=40)&&87!==t&&65!==t&&83!==t&&68!==t)return;SNAKE.removeEventListener(l,"keydown",d,!1),d=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;return 32===t&&0!=m.getBoardState()&&m.setPaused(!m.getPaused()),o.handleArrowKeys(t),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},SNAKE.addEventListener(l,"keydown",d,!1),o.rebirth(),o.handleArrowKeys(t),m.setBoardState(2),o.go()}return e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},SNAKE.addEventListener(l,"keydown",d,!1)},m.foodEaten=function(){r.innerHTML="Length: "+o.snakeLength,a.randomlyPlaceFood()},m.handleDeath=function(){var e=Math.max(t(o.snakeBody),t({tmp:{elm:a.getFoodElement()}}));l.removeChild(u),l.appendChild(u),u.style.zIndex=e,u.style.display="block",m.setBoardState(0)},h.fullScreen=void 0!==h.fullScreen&&h.fullScreen,h.top=void 0===h.top?0:h.top,h.left=void 0===h.left?0:h.left,h.width=void 0===h.width?400:h.width,h.height=void 0===h.height?400:h.height,h.fullScreen&&SNAKE.addEventListener(window,"resize",function(){m.setupPlayingField()},!1),m.setBoardState(0),h.boardContainer&&m.setBoardContainer(h.boardContainer)}}();var mySnakeBoard=new SNAKE.Board({boardContainer:"game-area",fullScreen:!0});
   </script>
</body>
</html>]]